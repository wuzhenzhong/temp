# 让我们不用每次写增删查改



有了前面的基础，我们学完这篇就可以变成高手了

```cs
`public` `class` `StudentManager : DbContext<Student>``{` `    ``//我们如果有特殊需要可以重写DbContext中默认 增、删、查、改、方法` `}`
```



只要继承了这个DbContext我们就不需要写增删查改了

用法如下

```cs
`var` `cm = ``new` `StudentManager();``//不能把StudentManager变成静对象保证每次都NEW出来``cm.GetList();``cm.Delete(1);`
```





**DbContext实现代码**

```cs
`public` `class` `DbContext<T> ``where` `T: ``class``,``new``()``{``    ``public` `DbContext()``    ``{``        ``Db = ``new` `SqlSugarClient(``new` `ConnectionConfig()``        ``{``            ``ConnectionString = ``"server=.;uid=sa;pwd=@jhl85661501;database=SqlSugar4XTest"``,``            ``DbType = DbType.SqlServer,``            ``InitKeyType = InitKeyType.Attribute,``//从特性读取主键和自增列信息``            ``IsAutoCloseConnection = ``true``,``//开启自动释放模式和EF原理一样我就不多解释了` `        ``});``        ``//调式代码 用来打印SQL ``        ``Db.Aop.OnLogExecuting = (sql, pars) =>``        ``{``            ``Console.WriteLine(sql + ``"\r\n"` `+``                ``Db.Utilities.SerializeObject(pars.ToDictionary(it => it.ParameterName, it => it.Value)));``            ``Console.WriteLine();``        ``};` `    ``}``    ``//注意：不能写成静态的``    ``public` `SqlSugarClient Db;``//用来处理事务多表查询和复杂的操作``    ``public` `SimpleClient<Student> StudentDb { ``get` `{ ``return` `new` `SimpleClient<Student>(Db); } }``//用来处理Student表的常用操作``    ``public` `SimpleClient<School> SchoolDb { ``get` `{ ``return` `new` `SimpleClient<School>(Db); } }``//用来处理School表的常用操作``    ``public` `SimpleClient<T> CurrentDb { ``get` `{ ``return` `new` `SimpleClient<T>(Db); } }``//用来处理T表的常用操作`  `    ``/// <summary>``    ``/// 获取所有``    ``/// </summary>``    ``/// <returns></returns>``    ``public` `virtual` `List<T> GetList()``    ``{``        ``return` `CurrentDb.GetList();``    ``}` `    ``/// <summary>``    ``/// 根据主键删除``    ``/// </summary>``    ``/// <param name="id"></param>``    ``/// <returns></returns>``    ``public` `virtual` `bool` `Delete(dynamic id)``    ``{``        ``return` `CurrentDb.Delete(id);``    ``}`  `    ``/// <summary>``    ``/// 更新``    ``/// </summary>``    ``/// <param name="id"></param>``    ``/// <returns></returns>``    ``public` `virtual` `bool` `Update(T obj)``    ``{``        ``return` `CurrentDb.Update(obj);``    ``}` `}`
```