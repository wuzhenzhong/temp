# cluster count failure reports（集群计数失败报告）

```javascript
CLUSTER COUNT-FAILURE-REPORTS node-id
```

**自3.0.0起可用。**

**时间复杂度：** O（N）其中N是故障报告的数量

该命令返回指定节点的*故障报告*数量。故障报告是 Redis 集群为了将`PFAIL`状态提升到状态而使用的方式，即节点不可访问`FAIL`状态，这意味着群集中的大多数主控方在时间窗口内同意节点不可访问。

更多细节：

- `PFAIL`当节点不可达的时间大于配置的*节点超时时间时*，该节点会标记另一个节点，该时间是 Redis 群集的基本配置参数。

- `PFAIL`状态节点在心跳包的八卦部分提供。

- 每当一个节点处理来自其他节点的闲话数据包时，它就会创建（并在需要时刷新 TTL）**故障报告**，记住给定节点表示另一给定节点处于`PFAIL`状态。

- 每个故障报告的生存时间都是*节点超时*时间的两倍。

- 如果在一个给定的时间，一个节点有另一个标记的节点`PFAIL`，并且同时收集了关于这个节点的大多数其他主节点的*故障报告*（包括它自己是否是主节点），那么它将节点的故障状态从`PFAIL`到`FAIL`，并广播一条消息，迫使所有可以到达的节点将该节点标记为`FAIL`。

此命令返回当前节点当前未过期的故障报告数（在*节点超时*时间的两倍内收到）。计数不包括我们要求这个计数的节点相信我们作为参数传递的节点 ID，计数*只*包括节点从其他节点收到的失败报告。

当 Redis 集群的故障检测器没有按照我们认为的那样运行时，该命令主要用于调试。

## 返回值

[整数回复](https://redis.io/topics/protocol#integer-reply)：节点的活动故障报告数量。

本文档系腾讯云云+社区成员共同维护，如有问题请联系 yunjia_community@tencent.com

最后更新于：2017-12-18