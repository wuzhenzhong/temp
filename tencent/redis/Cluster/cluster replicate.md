# cluster replicate（集群复制）

```javascript
CLUSTER REPLICATE node-id
```

**自3.0.0起可用。**

**时间复杂度：** O（1）

该命令将节点重新配置为指定主站的从站。如果接收命令的节点是*空主*节点，作为该命令的副作用，则节点角色将从主节点更改为从节点。

一旦一个节点变成另一个主节点的从属节点，就不需要通知其他集群节点有关更改：节点之间交换的心跳包会自动传播新配置。

假设奴隶总是接受命令：

\1. 指定的节点ID存在于其节点表中。

\2. 指定的节点ID不标识我们发送命令的实例。

\3. 指定的节点ID是一个主节点。

如果接收到该命令的节点不是从属节点，而是主节点，则只有满足以下附加条件时，该命令才会成功，并且该节点将转换为从节点：

\1. 该节点不提供任何散列槽。

\2. 该节点是空的，在密钥空间中根本不存储任何密钥。

如果命令成功，新的从站将立即尝试联系其主站以便从其复制。

## 返回值

[简单的字符串回复](https://redis.io/topics/protocol#simple-string-reply)：`OK`如果命令执行成功，否则返回错误。

本文档系腾讯云云+社区成员共同维护，如有问题请联系 yunjia_community@tencent.com

最后更新于：2017-12-18