# incrbyfloat

```javascript
INCRBYFLOAT key increment
```

**自2.6.0起可用。**

**时间复杂度：** O（1）

增加表示`key`由指定的存储在其中的浮点数的字符串`increment`。通过使用负值`increment`，结果是存储在键上的值减少（通过明显的加法属性）。如果密钥不存在，则`0`在执行操作之前将其设置为。如果发生以下情况之一，则会返回错误：

- 该键包含错误类型的值（不是字符串）。

- 当前关键内容或指定的增量不可解析为双精度浮点数。

如果命令成功，则新增值将作为键的新值（替换旧值）存储，并以字符串的形式返回给调用者。

字符串键和增量参数中已包含的值都可以以指数表示法提供，但是增量后计算的值将以相同的格式一致存储，也就是说，一个整数（如果需要）后跟一个点以及表示该数字的小数部分的可变数字的数字。尾随零总是被删除。

无论计算的实际内部精度如何，输出的精度都固定为小数点后的17位数。

## 返回值

[批量字符串回复](https://redis.io/topics/protocol#bulk-string-reply)：`key`增量后的值。

## 例子

redis> SET mykey 10.50 `"OK"` redis> INCRBYFLOAT mykey 0.1 `"10.6"` redis> INCRBYFLOAT mykey -5 `"5.6"` redis> SET mykey 5.0e3 `"OK"` redis> INCRBYFLOAT mykey 2.0e2 `"5200"`

## 实施细节

该命令始终在复制链接和仅附加文件中作为 SET 操作传播，因此基础浮点数学实现中的差异不会成为不一致性的来源。

本文档系腾讯云云+社区成员共同维护，如有问题请联系 yunjia_community@tencent.com

最后更新于：2017-12-18